{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import { loaderEl } from \"../main\";\nfunction fetchPhotoFromAPI(search) {\n  loaderEl.style.display=\"block\"\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '39362116-97c7d5619fee8bb7db7b12f12';\n  const imageType = 'photo';\n  const photoOrientation = 'horizontal';\n  const safeSearch = true;\n\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: search,\n    image_type: imageType,\n    orientation: photoOrientation,\n    safesearch: safeSearch,\n  });\n\n  return fetch(`${BASE_URL}?${params}`).then((response) => {\n\n    if(!response.ok){\n        throw new Error(response.statusText)\n    }\n\n    return response.json()\n  })\n}\n\nexport {fetchPhotoFromAPI}","function createMarkup(array){\nreturn array.map(({webformatURL, largeImageURL, tags, likes, views, comments, downloads}) => `\n<li class=\"gallery-item\">\n<a class=\"gallery-link\" href=\"${largeImageURL}\">\n  <img class=\"gallery-image\"  src=\"${webformatURL}\" alt=\"${tags}\">\n  <ul class=\"descr-list\">\n    <li class=\"descr-item\"><span class=\"descr-header\">Likes</span> <span class=\"descr-value\">${likes}</span></li>\n    <li class=\"descr-item\"><span class=\"descr-header\">Views</span> <span class=\"descr-value\">${views}</span></li>\n    <li class=\"descr-item\"><span class=\"descr-header\">Comments</span> <span class=\"descr-value\">${comments}</span></li>\n    <li class=\"descr-item\"><span class=\"descr-header\">Downloads</span> <span class=\"descr-value\">${downloads}</span></li>\n  </ul>\n  </a>\n</li>`).join(\" \")\n}\n\nexport {createMarkup}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { fetchPhotoFromAPI } from './js/pixabay-api';\nimport { createMarkup } from './js/render-functions';\n\n// DOM elements\nconst formEl = document.querySelector('.search-form');\nconst inputEl = formEl.elements.search;\nconst gallery = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\n\nlet simplelightbox\n\nformEl.addEventListener('submit', searchHandler);\nfunction searchHandler(evt) {\n\n  if(gallery.innerHTML) gallery.innerHTML=\"\"\n\n  evt.preventDefault();\n  fetchPhotoFromAPI(inputEl.value)\n    .then(data => {\n\n      if (!data.hits.length) {\n\n        iziToast.error({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      }\n\n      loaderEl.style.display = 'none';\n\n      gallery.innerHTML = createMarkup(data.hits);\n      \n      simplelightbox.refresh()\n    })\n    .catch(error => console.log(error));\n}\n\ngallery.addEventListener('click', galleryHandler);\nfunction galleryHandler(evt) {\n  // Preventing redirecting\n  if (evt.target.closest('.gallery-link')) {\n    evt.preventDefault();\n  }\n\n  if (evt.target.classList.contains('gallery-image')) {\n     simplelightbox = new SimpleLightbox('.gallery-item a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n      showCounter: true,\n    });\n  }\n}\n\nexport { loaderEl };\n"],"names":["fetchPhotoFromAPI","search","loaderEl","BASE_URL","API_KEY","imageType","photoOrientation","safeSearch","params","response","createMarkup","array","webformatURL","largeImageURL","tags","likes","views","comments","downloads","formEl","inputEl","gallery","simplelightbox","searchHandler","evt","data","iziToast","error","galleryHandler","SimpleLightbox"],"mappings":"6vBACA,SAASA,EAAkBC,EAAQ,CACjCC,EAAS,MAAM,QAAQ,QACvB,MAAMC,EAAW,2BACXC,EAAU,qCACVC,EAAY,QACZC,EAAmB,aACnBC,EAAa,GAEbC,EAAS,IAAI,gBAAgB,CACjC,IAAKJ,EACL,EAAGH,EACH,WAAYI,EACZ,YAAaC,EACb,WAAYC,CAChB,CAAG,EAED,OAAO,MAAM,GAAGJ,CAAQ,IAAIK,CAAM,EAAE,EAAE,KAAMC,GAAa,CAEvD,GAAG,CAACA,EAAS,GACT,MAAM,IAAI,MAAMA,EAAS,UAAU,EAGvC,OAAOA,EAAS,KAAM,CAC1B,CAAG,CACH,CCzBA,SAASC,EAAaC,EAAM,CAC5B,OAAOA,EAAM,IAAI,CAAC,CAAC,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAAM;AAAA;AAAA,gCAE7DL,CAAa;AAAA,qCACRD,CAAY,UAAUE,CAAI;AAAA;AAAA,+FAEgCC,CAAK;AAAA,+FACLC,CAAK;AAAA,kGACFC,CAAQ;AAAA,mGACPC,CAAS;AAAA;AAAA;AAAA,MAGtG,EAAE,KAAK,GAAG,CAChB,CCHA,MAAMC,EAAS,SAAS,cAAc,cAAc,EAC9CC,EAAUD,EAAO,SAAS,OAC1BE,EAAU,SAAS,cAAc,UAAU,EAC3CnB,EAAW,SAAS,cAAc,SAAS,EAEjD,IAAIoB,EAEJH,EAAO,iBAAiB,SAAUI,CAAa,EAC/C,SAASA,EAAcC,EAAK,CAEvBH,EAAQ,YAAWA,EAAQ,UAAU,IAExCG,EAAI,eAAc,EAClBxB,EAAkBoB,EAAQ,KAAK,EAC5B,KAAKK,GAAQ,CAEPA,EAAK,KAAK,QAEbC,EAAS,MAAM,CACb,MAAO,QACP,QACE,0EACZ,CAAS,EAGHxB,EAAS,MAAM,QAAU,OAEzBmB,EAAQ,UAAYX,EAAae,EAAK,IAAI,EAE1CH,EAAe,QAAS,CAC9B,CAAK,EACA,MAAMK,GAAS,QAAQ,IAAIA,CAAK,CAAC,CACtC,CAEAN,EAAQ,iBAAiB,QAASO,CAAc,EAChD,SAASA,EAAeJ,EAAK,CAEvBA,EAAI,OAAO,QAAQ,eAAe,GACpCA,EAAI,eAAc,EAGhBA,EAAI,OAAO,UAAU,SAAS,eAAe,IAC9CF,EAAiB,IAAIO,EAAe,kBAAmB,CACtD,aAAc,MACd,aAAc,IACd,YAAa,EACnB,CAAK,EAEL"}